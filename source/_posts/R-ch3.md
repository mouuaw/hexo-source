---
title: R-R프로그래밍
date: 2019-03-17 01:57:44
tags:
- R
---

## 01 R의 특징
(생략)

## 02 흐름 제어(조건문과 반복문)

### if
```r
if(cond) {
  cond가 참일 때 실행할 문장
}else {
  cond가 거짓일 때 실행할 문장 
}
```

다수의 TRUE, FALSE 데이터를 한 번에 처리한다면 ifelse() 함수를 고려할 수 있다.

```r
ifelse(
  test, # 참, 거짓을 저장한 객체
  yes, # test가 참일 때 선택할 값
  no # test가 거짓일 때 선택할 값
)
test에 다수의 TRUE, FALSE가 저장되어 있을 때 TRUE에 대해서는 yes 값을, FALSE에 대해서는 no 값을 선택하여 반환한다.
```

### 반복문

```r
for(i in data) {
  i를 사용한 문장
}
data에 들어있는 각각의 값을 변수 i에 할당하면서 각각에 대해 블록 안의 문장을 수행한다.

while(cond) {
  조건이 참일 때 수행할 문장
}
조건 cond가 참일 때 블록 안의 문장을 수행한다.

repeat {
  반복해수 수행할 문장
}
블록 안의 문장을 반복해서 수행한다. repeat은 다른 언어의 do-while에 해당한다.
```

반복문 내 블록에서는 break, next 문을 사용해 반복의 수행을 조정할 수 있다.

* break : 반복문을 종료한다.
* next: 현재 수행 중인 반복문 블록의 수행을 중단하고 다음 반복을 시작한다.

## 03 연산

### 수치 연산

* +, -, *, /: 사칙 연산
* n %% m: n 을 m으로 나눈 나머지
* n %/% m: n 을 m으로 나눈 몫
* n^m: n의 m승
* exp(n): e의 n승
* log(x, base=exp(1)): logbase(x), 만약 base가 지정되지 않으면 loge(x)를 계산
* log2(x), log10(x): 각각 log2(x), log10(x)를 계산
* sin(x), cos(x), tan(x): 삼각함수

### 벡터 연산

벡터 연산은 벡터 또는 리스트를 한 번에 연산하는 것을 말한다. 벡터 연산이 중요한 이유는 for 문 등을 사용해 값을 하나씩 처리해나가는 대신 벡터나 리스트를 한 번에 처리하는 것이 더 효율적이고 편리하기 때문이다.

예)
```r
> x <- c(1,2,3,4,5)
> x + x
[1] 2 4 6 8 10
> x == x
[1] TRUE TRUE TRUE TRUE TRUE
> x == c(1,2,3,5,5)
[1] TRUE TRUE TRUE FALSE TRUE
> c(T, T, T) & c(T, F, T)
[1] TRUE FALSE TRUE
```

R의 함수들은 기본적으로 이러한 벡터 기반 연산을 지원한다.

예)
```r
> x <- c(1,2,3,4,5)
> sum(x)
[1] 15
> mean(x)
[1] 3
> median(x)
[1] 3
```

### NA의 처리
NA는 값이 기록되지 않았거나 관칙되지 않은 경우 데이터에 저장되는 값으로 '결측치'라고 부른다.

데이터에 NA가 포함되어 있을 경우 연산 결과가 NA로 바뀐다.

이러한 문제점을 해결하기 위해 많은 R 함수에서 na.rm을 함수 인자로 받는다. na.rm은 NA값이 있을 때 해당하는 값을 연산에서 제외할 것인지를 지정하는 데 사용한다.

```r
> NA + 1
[1] NA
> sum(c(1,2,3,NA))
[1] NA
> sum(c(1,2,3,NA), na.rm=TRUE)
[1] 6
```

NA값에 따라 처리를 다르게 하는 함수들이 존재한다
* na.fail(object, ...) : object에 NA가 포함되어 있으면 실패한다
* na.omit(object, ...) ; object에 NA가 포함되어 있으면 이를 제외한다.
* na.exclude(object, ...) : object에 NA가 포함되어 있으면 이를 제외한다는 점에서 na.omit과 동일하다. 그러나 naresid, napredict를 사용하는 함수에서 NA로 제외한 행을 결과에 다시 추가한다는 점이 다르다.
* na.pass(object, ...) : object에 NA가 포함되어 있더라도 통과시킨다.

## 04 함수의 정의

### 기본 정의

함수의 정의는 다음과 같다
```r
function_name <- function(인자, 인자, ...) {
  함수 본문
  return(반환 값) # 반환 값이 없다면 생략
}
```

### 가변길이 인자
R의 함수는 가변인자를 인자로 받을 수 있다.

```r
> f <- function(...) {
  args <- list(...)
  for(a in args) {
    print(a)
  }
}
> f('3', '4')
[1] "3"
[1] "4"
```
### 주첩 함수
함수 안에 또 다른 함수를 정의하여 사용할 수 있다. 이를 중첩함수 라고 부른다.

```r
> f <- function(x, y) {
  print(x)
  g <- function(y) {
    print(y)
  }
  g(y)
}
> f(1,2)
[1] 1
[1] 2
```

## 05 스코프
코드에 기술한 변수의 사용범위를 정하는것을 스코프라고 한다. R에서는 대부분의 현대적인 프로그래밍 언어가 그러하듯이 문법적 스코프를 사용하며, 문법적 스코프는 변수가 정의된 블록 내부에서만 변수를 접근할 수 있는 구칙을 말한다.

